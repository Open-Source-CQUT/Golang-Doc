import{_ as o,V as i,W as d,X as n,Y as a,Z as s,a0 as t,F as l}from"./framework-f06be456.js";const r="/images/play.png",p="/images/goplay.png",c={},u=n("h1",{id:"playgrounds",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#playgrounds","aria-hidden":"true"},"#"),a(" Playgrounds")],-1),h=n("h2",{id:"介绍",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#介绍","aria-hidden":"true"},"#"),a(" 介绍")],-1),g=n("p",null,"对于一些简单的单文件演示代码，go提供了playground来在线运行go代码，不需要安装go环境，只需要一个浏览器即可。",-1),v={href:"https://github.com/golang/playground",target:"_blank",rel:"noopener noreferrer"},m={href:"https://go.dev/play/",target:"_blank",rel:"noopener noreferrer"},b=n("figure",null,[n("img",{src:r,alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1),k={href:"https://goplay.space/",target:"_blank",rel:"noopener noreferrer"},y=n("figure",null,[n("img",{src:p,alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1),f=n("p",null,"由于它是一个开源项目，你也可以选择在自己的服务器上搭建个人playground，安装方法见官方文档。Playground服务器会将上传的代码段存储到谷歌云存储，所以不建议分享敏感代码。对于国内用户，建议使用第二个因为不需要魔法上网，但它依旧是基于官方的Playground服务器，代码也会同步到官方那边的服务器里面。",-1),q={href:"https://github.com/246859/goplay",target:"_blank",rel:"noopener noreferrer"},_=t(`<h2 id="http-api" tabindex="-1"><a class="header-anchor" href="#http-api" aria-hidden="true">#</a> HTTP API</h2><p>上面提到的都是浏览器的方式交互，如果想要从客户端的角度与playground服务器交互，比如编写一个vuepress go playground的插件。由于playground服务器本身是一个HTTP服务器，我们可以使用HTTP的方式来与其进行交互。官方本身没有提供API文档，下面的HTTP API是我从playground代码里面了解到的，随着时间的推移可能会有些出入，为了获取最准确的信息可以自行去仓库里面查阅。</p><p>官方playground服务器地址：<code>play.golang.org</code>，下面演示都以官方服务器为准，如果使用第三方服务器的话替换域名即可。</p><h3 id="share" tabindex="-1"><a class="header-anchor" href="#share" aria-hidden="true">#</a> share</h3><p>分享代码段到playground服务器上，返回对应的snippet id。</p><div class="language-http line-numbers-mode" data-ext="http"><pre class="language-http"><code>POST https://play.golang.org/share
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><table><thead><tr><th>名称</th><th>位置</th><th>类型</th><th>必选</th><th>说明</th></tr></thead><tbody><tr><td>body</td><td>body</td><td>string</td><td>否</td><td>none</td></tr></tbody></table><p>响应示例</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>13AbsRp7_S9
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="compile" tabindex="-1"><a class="header-anchor" href="#compile" aria-hidden="true">#</a> compile</h3><p>编译并运行指定代码段，然后返回结果</p><div class="language-http line-numbers-mode" data-ext="http"><pre class="language-http"><code>POST https://play.golang.org/compile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><table><thead><tr><th>名称</th><th>位置</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>body</td><td>form-data</td><td>string</td><td>代码段</td></tr><tr><td>withVet</td><td>form-data</td><td>string(ture/false)</td><td>go vet</td></tr></tbody></table><p>响应示例</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;Errors&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Events&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;Message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello, world\\n&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;Kind&quot;</span><span class="token operator">:</span> <span class="token string">&quot;stdout&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;Delay&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;IsTest&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;TestsFailed&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fmt" tabindex="-1"><a class="header-anchor" href="#fmt" aria-hidden="true">#</a> fmt</h3><p>返回格式化后的代码段</p><div class="language-http line-numbers-mode" data-ext="http"><pre class="language-http"><code>POST https://play.golang.org/fmt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><table><thead><tr><th>名称</th><th>位置</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>body</td><td>form-data</td><td>string</td><td>代码段</td></tr><tr><td>imports</td><td>form-data</td><td>string(ture/false)</td><td>fix imports</td></tr></tbody></table><p>响应示例</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;Body&quot;</span><span class="token operator">:</span> <span class="token string">&quot;// You can edit this code!\\n// Click here and start typing.\\npackage main\\n\\nimport \\&quot;fmt\\&quot;\\n\\nfunc main() {\\n\\tfmt.Println(\\&quot;Hello, world\\&quot;)\\n}\\n&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Error&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="health" tabindex="-1"><a class="header-anchor" href="#health" aria-hidden="true">#</a> health</h3><p>对playground服务器进行健康检查</p><div class="language-http line-numbers-mode" data-ext="http"><pre class="language-http"><code>GET https://play.golang.org/_ah/health
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>响应示例</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ok
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="version" tabindex="-1"><a class="header-anchor" href="#version" aria-hidden="true">#</a> version</h3><p>查看playground服务器go版本</p><div class="language-http line-numbers-mode" data-ext="http"><pre class="language-http"><code>GET https://play.golang.org/version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>响应示例</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;go1.21.4&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Release&quot;</span><span class="token operator">:</span> <span class="token string">&quot;go1.21&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Go 1.21&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="view" tabindex="-1"><a class="header-anchor" href="#view" aria-hidden="true">#</a> view</h3><p>查看指定snippet id的代码段</p><div class="language-http line-numbers-mode" data-ext="http"><pre class="language-http"><code>GET https://play.golang.org/p/{id}.go
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>响应示例</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// You can edit this code!
// Click here and start typing.
package main

import &quot;fmt&quot;

func main() {
	fmt.Println(&quot;Hello, world&quot;)
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="download" tabindex="-1"><a class="header-anchor" href="#download" aria-hidden="true">#</a> download</h3><p>post方法携带download form参数会以attachment方式返回结果</p><div class="language-http line-numbers-mode" data-ext="http"><pre class="language-http"><code>POST https://play.golang.org/p/{id}.go
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><table><thead><tr><th>名称</th><th>位置</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>download</td><td>form-data</td><td>string(true/false)</td><td>是否下载</td></tr></tbody></table><p>响应示例</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// You can edit this code!
// Click here and start typing.
package main

import &quot;fmt&quot;

func main() {
	fmt.Println(&quot;Hello, world&quot;)
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,42),x={class:"hint-container tip"},P=t(`<p class="hint-container-title">提示</p><p>如果在使用官方服务器的过程中，提示你无法访问或者出现下面这种信息</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Viewing and/or sharing code snippets is not available in your country for legal reasons.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这是因为某种不可抗力中国大陆地区的用户无法访问服务器，并且在playground源代码中也有这么一个函数</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">allowShare</span><span class="token punctuation">(</span>r <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> r<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;X-AppEngine-Country&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;CN&quot;</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),T={href:"https://github.com/golang/go/issues/20065",target:"_blank",rel:"noopener noreferrer"};function w(E,H){const e=l("ExternalLinkIcon");return i(),d("div",null,[u,h,g,n("p",null,[a("Playground开源地址："),n("a",v,[a("go-playground (github.com)"),s(e)])]),n("p",null,[a("官方Playground地址："),n("a",m,[a("Go Playground - The Go Programming Language"),s(e)])]),b,n("p",null,[a("第三方Playground地址："),n("a",k,[a("The Go Play Space"),s(e)])]),y,f,n("p",null,[a("笔者自己整了一个玩具"),n("a",q,[a("goplay"),s(e)]),a("，用于在命令行内与playground服务器交互，也可以当作playground HTTP客户端库来使用。")]),_,n("div",x,[P,n("p",null,[a("具体原因看这里"),n("a",T,[a(" Issue #20065 · golang/go (github.com)"),s(e)]),a("。")])])])}const S=o(c,[["render",w],["__file","play.html.vue"]]);export{S as default};
